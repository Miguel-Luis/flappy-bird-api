generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

// Tabla de sesiones de autenticaci칩n
model auth_sessions {
  id            String   @id @default(uuid()) @db.Uuid
  user_name     String   @db.VarChar(255)
  password      String   @db.Text // Almacenar contrase침a hasheada
  refresh_token String?  @db.Text // Almacenar refresh token hasheado
  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt
}

// Tabla de jugadores
model players {
  id         String   @id @default(uuid()) @db.Uuid
  name       String @unique @db.VarChar(255)
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // Relaci칩n con las partidas
  games games[]
}

// Tabla de partidas/puntuaciones
model games {
  id          String   @id @default(uuid()) @db.Uuid
  player_id   String   @db.Uuid
  score       Int
  achieved_at DateTime @default(now())

  // Relaci칩n con el jugador
  player players @relation(fields: [player_id], references: [id], onDelete: Cascade)
}
